doctype html
html
    include ./head.jade
    body
        //.background
        #main
            //#scroll Включить скролл
            include ./nav.jade
            router-view
            
        script(type="text/x-template", id="home")
            #home.container
                h3 Home
                form
                    input.form-control(type="search", placeholder="Search", v-model="search")
                    select.form-control(v-model='genre')
                        option(value="") Select genre
                        option(v-for="value in genres", :value="value.id") {{value.name}}
                      //router-link(:to="")
                    router-link.icon.ion-md-heart(title="show favourites", to="favourites") {{favourites.length}}
                
                .isLoading(v-if="isLoading")
                h3(v-else-if="!filteredItems.length") No films searched
                film-card(v-for="item in filteredItems", :key="item.id", :item="item", @gchange="genre = $event")
                //router-link.item(v-for="item in filteredItems", :to="'details/'+ item.id")
                    img(:src="item.image_url")
                    .rating
                        i.active
                    p.title {{item.title}}
                    //pre {{item.genre_ids}}
                    span.badge.badge-warning.mr-1(v-for="id in item.genre_ids", @click.prevent.stop="genre = id", data-toggle="tooltip", data-placement="top", title="select genre") {{genresMap[id]}} 
                    .descr {{item.overview}}
                    //i.icon(:class="{'ion-md-heart' : item.isFavourite, 'ion-md-heart-empty' : !item.isFavourite}")
                    i.icon(:class="item.isFavourite? 'ion-md-heart': 'ion-md-heart-empty'", @click.prevent.stop="setFavourite(item)")
                    //ion-icon.add_to_favourites(name="star-outline", 
                        @click="addFavourites(item.id)"/*,:class="active: item.favourite"*/)
                    
                //#more(@click="getItems()") Показати ще 
                //#scroll_to_top GO UP!
        
        script(type="text/x-template", id="favourites")
            #favourites.container
                h3 Favourites
                film-card(v-for="item in movies", :key="item.id", :item="item")
        
        script(type="text/x-template", id="details")
            #details
                .isLoading(v-if="!item.id")
                .container(v-else)
                    img(:src="item.image_url")
                    .rating
                        i.active
                    h1.title {{item.title}}
                    //pre {{item.genre_ids}}

                    span.badge.badge-warning.mr-1(v-for="item in item.genres") {{item.name}} 
                    .descr {{item.overview}}
                    //i.icon(:class="{'ion-md-heart' : item.isFavourite, 'ion-md-heart-empty' : !item.isFavourite}")
                    .icon(:class="item.isFavourite? 'ion-md-heart': 'ion-md-heart-empty'")
                    //ion-icon.add_to_favourites(name="star-outline", 
                        @click="addFavourites(item.id)"/*,:class="active: item.favourite"*/)
                    h3 Related films: {{related.length}}
                    film-card(v-for="item in related", :key="item.id", :item="item")    
        
        script(type="text/x-template", id="film-card")
            router-link.item.film-card(:to="'/details/'+ item.id")
                img(:src="item.image_url")
                .rating
                    i.active
                p.title {{item.title}}
                //pre {{item.genre_ids}}
                
                span.badge.badge-warning.mr-1(v-if="genres", v-for="id in item.genre_ids", @click.prevent="$emit('gchange', id)", 
                    data-toggle="tooltip", data-placement="top", title="select genre") {{genres[id]}} 
                .descr {{item.overview}}
                i.icon(:class="item.isFavourite? 'ion-md-heart': 'ion-md-heart-empty'", 
                    @click.prevent="setFavourite(item)", title="Add to favourites")
       

        include ./scripts.jade 
        
        script(src='./home.js')
        script(src='./details.js')
        script(src='./favourites.js')
        script(src='./filmCard.component.js')
        script(src='./api.service.js')
        script(src='./main.js')




      
